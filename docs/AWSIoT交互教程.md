#### AWS IoT 交互教程

AWS IoT 是一项托管的云服务，使互连设备 (车辆、电灯泡、传感器栅格等) 能够轻松、安全地与云应用程序和其他设备进行交互。

此交互教程将帮助您详细了解此服务以及您可能如何使用下面不同的功能:

将物品连接到设备网关
使用规则引擎处理和操作数据
使用 Device Shadow 读取和设置设备状态

##### 设备网关

- 将物品连接到设备网关
- AWS IoT 设备网关支持设备安全高效地与 AWS IoT 进行通信。单击此处[https://docs.aws.amazon.com/iot/latest/developerguide/protocols.html?icmpid=docs_iot_console]可了解有关 AWS IoT 所支持的协议的更多信息。
- 物品相互之间可以通过设备网关进行通信，即使它们使用不同的协议也是如此。
- 左侧示例演示了两个都连接到设备网关的物品 (即，连接的电灯泡和控制单元)。控制单元可以向设备网关发布命令，而电灯泡可以订阅和侦听相关命令。
- 单击控制单位的按钮以查看它如何将消息发送至设备网关，然后将消息发送到显示设备。

##### 规则引擎

	- 使用规则引擎处理和操作数据
	- 规则引擎评估发布到 AWS IoT 的入站消息，根据您定义的业务规则转换这些消息并传输到其他物品或云。

	单击此处[https://docs.aws.amazon.com/iot/latest/developerguide/iot-rules.html?icmpid=docs_iot_console]可了解有关规则引擎的更多信息。
	
	左侧示例演示了这样一条规则:
	
	评估控制单元所发布的命令
	确定命令是否为“B”
	如果命令为“B”，则该规则将消息转换为“G”并将“G”中继到电灯泡
	请尝试从控制单元发送“R”、“G”和“B”命令以观察规则引擎如何处理这些消息。
##### 规则操作

​	使用规则引擎处理和操作数据
​	规则引擎还可以将消息路由到云终端节点，例如 AWS Lambda 函数或 DynamoDB 表。单击此处可了解有关您可通过规则执行的操作的更多信息。
​	

	左侧示例显示添加下面第二条规则:
	
	评估控制单元所发布的命令
	确定命令是否为“R”
	如果命令为“R”，则该规则将消息副本传送到 3 个终端节点 (DynamoDB 数据库表、Lambda 计算函数和 Simple Notification Service (SNS)) 以向移动设备推送通知。
##### Device Shadow

​	使用 Device Shadow 读取和设置设备状态
​	AWS IoT 包括 Device Registry 和 Device Shadow，以便您可以注册任何所需的物品，在云中以名称、一些属性和一个持久的虚拟“影子”形式表示物品。

	左侧示例显示已创建一个物品来表示实体电灯泡，且云中有一个虚拟副本。
	
	请尝试关闭实体电灯泡。您将会注意到，Device Shadow 会记住实体电灯泡的颜色。
	
	接下来，请尝试在实体电灯泡仍为关闭状态下从控制单元发送新的“R”、“G”和“B”命令。
	
	影子将保留期望的电灯泡未来状态。当您重新打开实体电灯泡时，AWS IoT 将指示实体电灯泡匹配其影子。
##### 构建解决方案

​	设置设备状态
​	通过 AWS IoT 可以轻松地构建配套应用程序来与您已连接的物品进行交互。
​	左侧示例显示了一个反映电灯泡颜色的移动应用程序。该移动应用程序从不直接与电灯泡通信，而是使用 REST API 读取和设置电灯泡的 Device Shadow 的状态。
​	请尝试通过该移动应用程序与电灯泡进行交互。

##### 完成